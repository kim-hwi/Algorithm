MAIN	START	1000

	JSUB	SCAN1

	

ALG	LDX	#1
	LDCH	DATA,X
	STA	TMP
	TIX	CASE
	JEQ	PRINT .다음재귀 가는것도 생각
	LDA	#1
	STA	NOWCOL
	STA	NOWMAT
	J	ALG2

ALG1	+JSUB	POP .여기서도 nowcol,nowmat 초기화
	LDA	#1
	STA	NOWCOL
	STA	NOWMAT
	LDCH	DATA,X
	STA	TMP
	TIX	CASE

ALG2	LDA	NOWMAT
	COMP	MATLM
	JEQ	QUIT

	LDA	NOWCOL
	COMP	COLLM
	JEQ	PLUSE .다음줄로 넘어가기 위함

REPLUSE	LDA	NOWCOL
	ADD	#1
	STA	NOWCOL
	LDA	NOWMAT
	ADD	#1
	LDA	NOWMAT

	LDCH	DATA,X
	TIX	CASE

	COMP	TMP
	STA	TMP
	JEQ	ALG2
	
	LDA	MATLM
	+JSUB	PUSH
	LDA	COLLM
	+JSUB	PUSH
	+JSUB	ALG1




QUIT	RSUB

PLUSE	STX	XTMP
	LDA	COL
	SUB	#1
	ADD	XTMP
	STA	XTMP
	LDX	XTMP
	J	REPLUSE





LOOP	COMP	#1
	JEQ	EXIT
	STA	TMPNUM
	STL	TMPL




	+JSUB	PUSH
	LDA	TMPL
	+JSUB	PUSH
	LDA	TMPNUM
	
	JSUB	LOOP

	+JSUB	POP
	STA	TMPL
	JSUB	POP

	+JSUB	PRINT
	LDL	TMPL
	RSUB


PRINT	TD	OUTDEV
	JEQ	PRINT
	LDCH	DATA
	WD	OUTDEV


SCAN1	TD	INDEV
	JEQ	SCAN1
	RD	INDEV
	SUB	#48
	STA	CASE
	STA	COL
	STA	COLLM
	MUL	CASE
	STA	CASE
	STA	MATLM
	RD	INDEV
	COMP	ASEN
	LDX	#1
	JEQ 	SCAN2
	
SCAN2	LDA	#0
	TD	INDEV
	JEQ	SCAN2
	RD	INDEV
	COMP	ASEN
	JEQ 	SCAN2
	SUB	#48
	STCH	DATA,X
	LDA	#0
	TIX	CASE
	
	JLT	SCAN2
	JEQ 	SCAN2
	COMP	ASEN
	RSUB
	
PUSH	STA	NOW

	
	TIX	CASE
	
	RSUB		


TMPL	RESW	1
TMPNUM	RESW	1
ASEN	WORD	10
CASE	RESW	1
TEST	RESB	1
INDEV	BYTE	0
OUTDEV	BYTE	1
DATA	RESB	64
TMP	RESW	1
COL	RESW	1
COLLM	RESW	1
MATLM	RESW	1
NOWCOL	RESW	1
NOWMAT	RESW	1
STACK	RESW	64
XTMP	RESW	1  

	STS	0
SCAN3	TD	INDEV	
	JEQ	SCAN2
	RD	INDEV
	STCH	DATA
	STS	TMP
	LDA	TMP
	ADD	#1
	STA	TMP
	COMP	TEST
	JLT	SCAN2